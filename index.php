<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
	   <link rel="shortcut icon" href="assets/images/ttt.ico">
    <title>TomaTuTurno</title>

    <!-- Bootstrap Core CSS -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/jquery-ui.css" rel="stylesheet">
    <link href="assets/css/jquery-ui.min.css" rel="stylesheet">
    <link href="assets/css/theme.css" rel="stylesheet">

    <!-- Main stylesheet -->
    <link href="assets/css/hallooou.css" rel="stylesheet">

    <!-- Color stylesheet -->
    <!-- <link href="assets/css/colors.css" rel="stylesheet"> -->
    <!-- <link href="assets/css/colors_2.css" rel="stylesheet"> -->
    <!-- <link href="assets/css/colors_3.css" rel="stylesheet"> -->
    <!-- <link href="assets/css/colors_4.css" rel="stylesheet"> -->


    <!-- Plugin stylesheets -->
    <link href="assets/css/plugins/owl.carousel.css" rel="stylesheet">
    <link href="assets/css/plugins/owl.theme.css" rel="stylesheet">
    <link href="assets/css/plugins/owl.transitions.css" rel="stylesheet">
    <link href="assets/css/plugins/animate.css" rel="stylesheet">
    <link href="assets/css/plugins/magnific-popup.css" rel="stylesheet">
    <link href="assets/css/plugins/jquery.mb.YTPlayer.min.css" rel="stylesheet">


    <!-- Custom Fonts -->
    <link href="assets/css/font-awesome.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Raleway:100,600' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300' rel='stylesheet' type='text/css'>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <script>
        document.createElement('video');
      </script>
    <![endif]-->


</head>

<body id="home">
            <!-- Navigation -->
            <nav class="navbar navbar-custom navbar-fixed-top" role="navigation">
                <div class="container">
                    <div class="navbar-header pull-left">
                        <a class="navbar-brand page-scroll" href="#home">
                            <!-- replace with your brand logo/text -->
                            <span class="brand-logo"><strong>TomaTuTurno<strong></span>
                        </a>
                    </div>
                    <div class="main-nav pull-right">
                        <div class="button_container toggle">
                            <span class="top"></span>
                            <span class="middle"></span>
                            <span class="bottom"></span>
                        </div>
                    </div>
                    <div class="overlay" id="overlay">
                        <nav class="overlay-menu">
                            <ul>
                                <li><a href="#about">Información</a></li>
                                <li><a href="#counter">Estado matrículas</a></li>
                                <li><a href="#contact">Pide tu turno</a></li>
                                <li><a href="#team">Equipo de trabajo</a></li>
                                <li><a href="#descargasMovil">>Descargar la APP<</a></li>
                            </ul>
                        </nav>
                    </div>
                </div><!-- /.container -->
            </nav>


            <!-- Intro Header -->
            <!-- Full Page Image Background Carousel Header -->
            <header id="intro-carousel" class="carousel slide">
                <!-- Optional Indicators -->
                <!-- <ol class="carousel-indicators">
                        <li data-target="#intro-carousel" data-slide-to="0" class="active"></li>
                        <li data-target="#intro-carousel" data-slide-to="1"></li>
                        <li data-target="#intro-carousel" data-slide-to="2"></li>
                    </ol> -->
                <!-- Wrapper for slides -->
                <div class="carousel-inner">
                    <div class="item active">
                        <!-- Set the first background image using inline CSS below. -->
                        <div class="fill" style="background-image:url('assets/images/cover-one.jpg');"></div>
                        <div class="carousel-caption">
                            <h1 class="wow animated slideInDown">La experiencia de la matrícula <span class="highlight">a otro nivel</span></h1>
                            <p class="intro-text wow animated slideInUp">Diseñado para hacer que tu experiencia de matrícula sea algo sorprendente.</p>
                            <a href="#contact" class="btn btn-default btn-lg">Pedir Turno</a>
                        </div>
                        <div class="overlay-detail"></div>
                    </div><!-- /.item -->

                    <div class="item">
                        <!-- Set the second background image using inline CSS below. -->
                        <div class="fill" style="background-image:url('assets/images/cover-two.jpg');"></div>
                        <div class="carousel-caption">
                            <h1 class="wow animated slideInDown"><span class="highlight">Todo lo que necesitas saber</span> en la palma de tu mano</h1>
                            <p class="intro-text wow animated slideInUp">Solo debes navegar a través de la página.</p>
                            <a href="#about" class="btn btn-default btn-lg">Si quiere saber más</a>
                        </div>
                        <div class="overlay-detail"></div>
                    </div><!-- /.item -->

                    <div class="item">
                        <!-- Set the second background image using inline CSS below. -->
                        <div class="fill" style="background-image:url('assets/images/cover-three.jpg');"></div>
                        <div class="carousel-caption">
                            <h1 class="wow animated slideInDown">Información de las matrículas en tiempo <span class="highlight">real</span></h1>
                            <p class="intro-text wow animated slideInUp">Al instante y sin preocupaciones.</p>
                            <a href="#counter" class="btn btn-default btn-lg">Revisar estados de matrícula</a>
                        </div>
                        <div class="overlay-detail"></div>
                    </div><!-- /.item -->

                </div>
                <!-- Controls -->
                <a class="left carousel-control squared" href="#intro-carousel" data-slide="prev">
                    <i class="fa fa-angle-left fa-2x"></i>
                </a>
                <a class="right carousel-control squared" href="#intro-carousel" data-slide="next">
                    <i class="fa fa-angle-right fa-2x"></i>
                </a>
                <div class="mouse"></div>
            </header>

             <!-- About Section -->
            <section id="about" class="about content-section alt-bg-light wow fadeInUp" data-wow-offset="10">
                <div class="container">
                    <div class="row">
                        <div class="col-md-6">
                            <h2>Para tu conocimiento</h2>
                            <h3 class="caption gray">Descripción del servicio</h3>
                            <p class="text-justify">Es un software que implementa una solución al problema de las colas tediosas durante la época de prematrícula, prestando un servicio que posibilita que las personas puedan mantenerse informados sobre lo que está pasando en su oficina de facultad respecto al proceso de prematrículas, mejorando y haciendo más manejable todo el proceso de matrícula.</p>

                            <h3 class="caption gray">Problema a resolver</h3>
                            <p class="text-justify">Cada medio año se presenta una problemática que afecta a toda la comunidad universitaria de la Universidad de Cartagena, más específicamente en las jornadas de matrícula, un problema para el cual no se han propuesto acciones tan contundentes y que semestre tras semestre aqueja tanto a administrativos, estudiantes y trabajadores de la universidad en muchas ocasiones.<br>
Dicho problema es la misma jornada en sí, por los contratiempos que normalmente conlleva y no es para menos, usualmente en una jornada de matrícula se escuchan muchas situaciones como (nota: Lo siguiente es una recopilación de algunas de las situaciones experimentadas por los estudiantes durante la época de matrícula):

<ul>
<li class="text-justify">La gran cantidad de tiempo que esperaron hasta la jornada de la tarde, ya que no alcanzaron a coger cupos de la mañana (en comunicación social por ejemplo donde solo se asignaban 45 cupos por jornada).</li>
<li class="text-justify">Que no se enteraron que día les tocaba venir o no pudieron por determinada circunstancia y de hecho se arriesgaron a venir un día que no era el de su semestre para lograr matricularse, cosa que aceptaban pero dependiendo del volumen de estudiantes, casualidad para dicho estudiante ese día había una larga fila de no solo los de ese semestre sino de otros que tampoco pudieron venir el día que les tocaba por dinero o cuestiones varias (caso de administración de empresas que matriculó por semestre, de hecho economía tiene el mismo método de matrícula).</li>
<li class="text-justify">Por otra parte, se logra observar que los estudiantes se presentan el primer día bastante temprano esperando un volumen de gente grande, pero se encuentran con la situación que son tan solo personas durante toda la jornada, esto implica de cierta manera que otras muchas personas al esperar dicho volumen de personas en las oficinas ni si quiera se animaron a ir.</li>
<li class="text-justify">Muchos de los estudiantes ni siquiera saben cuándo la plataforma está presentando problemas y al arriesgarse a ir (dándose cuenta que la misma no está permitiendo cumplir con las labores básicas de matrículas), terminan renegando en los pasillos que su mañana ha sido perdida y cuestionándose si llenar el papel de prematrícula o si venir otro día y gastar más transporte, esto por determinado horario o profesor que querían elegir y que a veces al no estar presente no saben que dicho horario ya está lleno por otros alumnos (caso encontrado muchas veces en Ingeniería).</li>
<li class="text-justify">Lo anterior sin mencionar el caso más común entre los estudiantes, ir y encontrar una gran cantidad de gente queriendo matricularse toda en la misma jornada, pero sencillamente el volumen de gente es demasiado como para que los jefes de departamento logren matricular tanta gente, de hecho esto afecta al mismo tiempo a ellos mismos, pues al ver tal volumen de gente.</li>
<li class="text-justify">Ahora miremos como esto afecta a los encargados matricular, ya que ellos también se ven afectados en gran manera, porque si bien las personas se estresan de sobre manera al ver como no van a poder matricularse o por el tiempo que les toca esperar hasta su turno enfrente de la oficina que les toca, quienes los atienden lidian con su mala actitud y bullicio que se forma muchas veces sin intención por parte de los que esperan; eso sin mencionar el trabajo extra que administrativos les traigan sobre asignaturas o demás.</li>
</ul>
<br>
Nota: usamos cookies para mejorar tu experiencia.
</p>
                        </div><!-- /.col-md-6 -->

                        <div class="col-md-6">
                            <!-- Display image -->
                            <!-- <img src="assets/images/hallooou_template-iphone_sm.png" class="img-responsive"> -->
                            <!-- Optional video embed code -->
                                <h2>Aprenda a usar nuestro servicio</h2>
                            <div class="embed-responsive embed-responsive-16by9">
                                <iframe src="https://player.vimeo.com/video/193495094?title=0&amp;byline=0&amp;portrait=1" class="embed-responsive-item" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
                            </div>
                        </div><!-- /.col-md-6 -->
                    </div><!-- /.row -->
                </div><!-- /.container -->
            </section><!-- /.section -->

            <!-- Counter Section -->
            <section id="counter" class="counter-section content-section">
                <div class="container">
                    <div class="row text-center" id="counterProgramas">
                        <div class="col-md-12">
                            <h2 class="white">Programas matriculando actualmente..</h2>
                            <h3 class="white caption"><b>Número de turnos en espera por programa<b></h3>
                            <h3 class="caption"><b>Filtrar un programa:<b></h3>
                            <input class="form-control autocomplete" type="text" id="filtrador" placeholder="Nombre de un programa" value="">
                            <br>
                            <br>
                            <div  class="col-md-12" id="listaProgramas">

                            </div>
                        </div><!-- /.col-md-12 -->
                    </div><!-- /.row -->
                </div><!-- /.container -->
            </section><!-- /.counter-section -->

            <!-- Contact section -->
            <section id="contact" class="contact content-section no-bottom-pad wow fadeIn" data-wow-offset="10">
                <div class="container">
                    <div class="row text-center">
                        <div class="col-md-12">
                            <h2>Pida su turno</h2>
                            <h3 class="caption gray">Bienvenido estudiante udeceista, sientase libre de pedir su turno y mejorar su forma de esperar por él.</h3>
                        </div><!-- /.col-md-12 -->

                    </div><!-- /.row -->
                </div><!-- /.container -->

                <div class="container" id="restaurador">
                    <div class="row form-container">

                        <div class="col-md-8 contact-form">
                            <h3>INGRESE SUS DATOS</h3>
                            <form class="ajax-form" id="contactForm" method="post" action="#">
                                <div class="form-group">
                                    <input type="phone" class="form-control" id="phone" name="phone" placeholder="Tu código estudiantil..." value="" required>
                                </div>
                                <div class="form-group">
                                    <input type="text" class="form-control" id="name" name="name" placeholder="Tu nombre..." value="" required>
                                </div>
                                <div class="form-group">
                                    <input type="password" class="form-control" id="pass" name="pass" placeholder="Tu contraseña..." value="" required>
                                </div>
                                <!--<div class="form-group">
                                    <textarea class="form-control" rows="4" name="message" placeholder="Your message..." required></textarea>
                                </div>-->
                                <div class="form-group" id="divBoton">
                                    <button id="turnador" type="button" name="turnador" class="btn btn-default btn-lg" style="padding-top:20px; padding-bottom:20px;"><i class="fa fa-paper-plane fa-fw"></i>ENVIAR</button>
                                </div>
                            </form>
                        </div><!-- /.contact-form -->



                        <div class="col-md-4 contact-address" id="ubicacionTurnos">
                            <h3>TURNOS EN ESTA PÁGINA</h3>

                        </div><!-- /.contact-address -->

                    </div><!-- /.row -->
                </div><!-- /.container -->

              </section>



            <!-- Our team Section -->
            <section id="team" class="team content-section">
                <div class="container">
                    <div class="row text-center">
                        <div class="col-md-12">
                            <h2>Nuestro equipo</h2>
                            <h3 class="caption gray" style="color:purple;">Ingenieros a cargo</h3>
                        </div><!-- /.col-md-12 -->

                        <div class="container">
                            <div class="row">

                              <div class="col-md-4">
                                  <div class="team-member wow fadeIn" data-wow-offset="10">
                                      <figure>
                                          <img src="assets/images/1.jpg" alt="" class="img-responsive">
                                          <figcaption>
                                              <p>Estudiante de la universidad de Cartagena.</p>
                                              <ul>
                                                  <li><a href="https://www.facebook.com/david.cermenopinzon"><i class="fa fa-facebook fa-2x"></i></a></li>
                                                  <li><a href="https://twitter.com/Daecepi22"><i class="fa fa-twitter fa-2x"></i></a></li>
                                                  <li><a href="https://co.linkedin.com/in/david-eduardo-cerme%C3%B1o-pinzon-1186b0bb"><i class="fa fa-linkedin fa-2x"></i></a></li>
                                              </ul>
                                          </figcaption>
                                      </figure>
                                      <h4>David Eduardo Cermeño Pinzon</h4>
                                      <p>Estudiante de Ingeniería de Sistemas</p>
                                  </div><!-- /.team-member -->
                              </div><!-- /.col-md-4 -->

                              <div class="col-md-4">
                                  <div class="team-member wow fadeIn" data-wow-offset="10">
                                      <figure>
                                          <img src="assets/images/2.jpg" style="width:200px; height:305px" alt="" class="img-responsive">
                                          <figcaption>
                                              <p>Estudiante de la universidad de Cartagena.</p>
                                              <ul>
                                                  <li><a href="https://www.facebook.com/falkry"><i class="fa fa-facebook fa-2x"></i></a></li>
                                                  <li><a href="https://twitter.com/dpadillaf"><i class="fa fa-twitter fa-2x"></i></a></li>
                                                  <!--<li><a href=""><i class="fa fa-linkedin fa-2x"></i></a></li>-->
                                              </ul>
                                          </figcaption>
                                      </figure>
                                      <h4>David Padilla Fonseca</h4>
                                      <p>Estudiante de Ingeniería de Sistemas</p>
                                  </div><!-- /.team-member -->
                              </div><!-- /.col-md-4 -->

                            </div><!-- /.row -->
                        </div><!-- /.container -->

                    </div><!-- /.row -->
                </div><!-- /.container -->
                <div class="container-fluid buffer-forty-top">
                    <h3>NUESTRA SEDE ACTUALMENTE</h3>
                    <div class="row">
                        <section id="cd-google-map no-bottom-pad">
                            <div id="google-container"></div>
                            <div id="cd-zoom-in"></div>
                            <div id="cd-zoom-out"></div>
                        </section>
                    </div><!-- /.row -->
                </div><!-- /.container-fluid -->
            </section><!-- /.our-team -->

            <!-- Call to action - two section -->
            <section class="cta-two-section" id="descargasMovil">
                <div class="container">
                    <div class="row">
                      <div class="col-md-12">
                        <h3>Opciones de descargar:</h3>
                      </div>
                    </div><!-- /.row -->
                    <br />
                    <div class="row">
                        <div class="col-sm-6" style="text-align:center;">
                            <a href="tomatuturno_iOS.apk" class="btn btn-overcolor">iOS</a>
                        </div>
                        <div class="col-sm-6" style="text-align:center;">
                            <a href="tomatuturno_android.apk" class="btn btn-overcolor">Android</a>
                        </div>
                    </div><!-- /.row -->
                </div><!-- /.container -->
            </section><!-- /.cta-two-section -->

            <!-- Footer -->
            <footer>
                <div class="container">
                    <div class="row text-center">
                        <div class="col-md-12 segment">
                            <a href="#" title="Da E Ce Pi - Desarrollador">
                                <h2>
                                    TomaTuTurno
                                </h2>
                            </a>
                            <p class="white">Creemos en que todo puede ser más eficiente.</p>
                        </div><!-- /.col-md-12 -->
                    </div><!-- /.row -->

                </div><!-- /.container -->

                <div class="copynote">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-12 text-center">
                                &copy; 2016. TomaTuTurno. All rights reserved.
                            </div><!-- /.col-md-12 -->

                        </div><!-- /.row -->
                    </div><!-- /.container -->
                </div><!-- /.copynote -->

                <div class="nav pull-right scroll-top">
                    <a href="#home" title="Scroll to top"><i class="fa fa-angle-up"></i></a>
                </div>
                <button id="mensaje" type="button" style="display:none;" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Open Modal</button>
            </footer><!-- /.footer -->

            <!-- Modal -->
            <div class="modal fade" id="myModal" role="dialog">
              <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Información del turno</h4>
                  </div>
                  <div id="miMensaje" class="modal-body">
                    <p>Algo de texto a modificar.</p>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                  </div>
                </div>

              </div>
            </div>

            <div class="modal fade" id="myModalAgrega" role="dialog">
              <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Agregar turnos</h4
                  </div>
                  <div id="miMensajeAgrega" class="modal-body">
                    <p>Introduzca los datos de su turno.<br />
                    <label for="codigoAgrega">Código:</label><input class='form-control' id="codigoAgrega" type="text" placeholder='Escriba el código del turno' value='' required>
                    <label for="passAgrega">Contraseña:</label><input class='form-control' id="passAgrega" type="password" placeholder='Escriba la clave del turno' value='' required>
                    </p>
                    <button class='btn btn-default btn-sm' id='agregador' style='margin-left:30%; border-radius: 15px;'>Agregar turno</button>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-default" id="cerrando" data-dismiss="modal">Cerrar</button>
                  </div>
                </div>

              </div>
            </div>
    <!-- jQuery -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery-ui.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="assets/js/bootstrap.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="assets/js/plugins/wow.min.js"></script>
    <script src="assets/js/plugins/owl.carousel.min.js"></script>
    <script src="assets/js/plugins/jquery.parallax-1.1.3.js"></script>
    <script src="assets/js/plugins/jquery.magnific-popup.min.js"></script>
    <script src="assets/js/plugins/jquery.mb.YTPlayer.min.js"></script>
    <script src="assets/js/plugins/jquery.countTo.js"></script>
    <script src="assets/js/plugins/jquery.inview.min.js"></script>
    <script src="assets/js/plugins/pace.min.js"></script>
    <script src="assets/js/plugins/jquery.easing.min.js"></script>
    <script src="assets/js/plugins/jquery.validate.min.js"></script>
    <script src="assets/js/plugins/additional-methods.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCzjY4_zUz8GdR1MWsM-ksnhCrV_LE0FyI"></script>
    <!-- Custom JavaScript -->
    <script src="assets/js/hallooou.js"></script>
    <script src="assets/js/push.min.js"></script>
    <script src="assets/js/funciones.js"></script>
    <script type="text/javascript">
        var notificado=new Array();

        function inicioNumeroCookies() {
          if(getCookie("ultima") == ""){
            setCookie("ultima","1",1);
          }
        }

        function setCookie(cname, cvalue, exdays) {
            var d = new Date();
            d.setTime(d.getTime() + (exdays*24*60*60*1000));
            var expires = "expires="+ d.toUTCString();
            document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
        }

        function getCookie(cname) {
            var name = cname + "=";
            var ca = document.cookie.split(';');
            for(var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                }
            }
            return "";
        }

        function aumentoCookies(cname) {
          var numero = parseInt(cname.substr(1));
          if (ultimaCookie() <= numero) {
            setCookie("ultima",""+(numero+1),1);
          }
        }

        function cambioCookies(cname, cvalue, exdays) {
          aumentoCookies(cname);
          setCookie(cname, cvalue, exdays);
        }

        function ultimaCookie(){
          var numero = parseInt(getCookie("ultima"));
          return numero;
        }

        function buscarEnArreglo(arreglo,dato){
          for(var i = 0; i < Object.keys(arreglo).length; i++){
            if (arreglo[i].carrera == dato) {
              return arreglo[i].enEspera;
            }
          }
          return 0;
        }

        function getCodigo(codigo){
          return codigo[0]+codigo[1]+codigo[2];
        }

        function refrescamiento(){
          var parametros = "";
          var tiemposT = new Array();
          var mananaT = new Array();
          var tardeT = new Array();
          var atendidosT = new Array();

          $.ajax({
              data: parametros,
              type: "POST",
              url: "assets/php/refrescamiento.php",
              async: true,
              success: function(datos){
                  var arraya = JSON.parse(datos);

                  $("#listaProgramas").html("");
                  if ($("#filtrador").val() != "" && $("#filtrador").val() != undefined) {
                    for(var i = 0; i < Object.keys(arraya['estados']).length; i++){
                      if(arraya['estados'][i].programa == $("#filtrador").val()){
                        if (arraya['estados'][i].estado == "activo") {
                          var cadena1="<br><div class='col-sm-12' data-wow-offset='10'><h3>"+arraya['estados'][i].programa+"</h3><strong><span class='timer'>"+buscarEnArreglo(arraya['turnos'], arraya['estados'][i].codigo)+"</span></strong><span class='count-description'>Atendidos: "+arraya["estados"][i].turnos_atendidos+"-Turnos por jornada: "+arraya['estados'][i].turnos_manana+" mañana, "+arraya['estados'][i].turnos_tarde;
                          var cadena2=" tarde<br> Comentarios del programa: "+arraya['estados'][i].Comentarios+"</span></div><!-- /.col-sm-3 -->";
                          $("#listaProgramas").append(cadena1+cadena2);
                        } else {
                          var cadena1="<br><div class='col-sm-12' data-wow-offset='10'><h3>"+arraya['estados'][i].programa+"</h3><strong><span class='timer'>"+buscarEnArreglo(arraya['turnos'], arraya['estados'][i].codigo)+"</span></strong><span class='count-description'>Atendidos: "+arraya["estados"][i].turnos_atendidos+" -> Programa actualmente NO matriculando";
                          $("#listaProgramas").append(cadena1);
                        }

                        //Valores para cookies
                        tiemposT[(arraya['estados'][i].codigo)] = Math.round((arraya['estados'][i].segundos_espera)/60).toString();
                        mananaT[(arraya['estados'][i].codigo)] = arraya['estados'][i].turnos_manana;
                        tardeT[(arraya['estados'][i].codigo)] = arraya['estados'][i].turnos_tarde;
                        atendidosT[(arraya['estados'][i].codigo)] = arraya['estados'][i].turnos_atendidos;
                      }
                    }
                  } else {
                    for(var i = 0; i < Object.keys(arraya['estados']).length; i++){
                        if (arraya['estados'][i].estado == "activo") {
                          var cadena1="<br><div class='col-sm-12' data-wow-offset='10'><h3>"+arraya['estados'][i].programa+"</h3><strong><span class='timer'>"+buscarEnArreglo(arraya['turnos'], arraya['estados'][i].codigo)+"</span></strong><span class='count-description'>Atendidos: "+arraya["estados"][i].turnos_atendidos+"-Turnos por jornada: "+arraya['estados'][i].turnos_manana+" mañana, "+arraya['estados'][i].turnos_tarde;
                          var cadena2=" tarde<br> Comentarios del programa: "+arraya['estados'][i].Comentarios+"</span></div><!-- /.col-sm-3 -->";
                          $("#listaProgramas").append(cadena1+cadena2);
                        } else {
                          var cadena1="<br><div class='col-sm-12' data-wow-offset='10'><h3>"+arraya['estados'][i].programa+"</h3><strong><span class='timer'>"+buscarEnArreglo(arraya['turnos'], arraya['estados'][i].codigo)+"</span></strong><span class='count-description'>Atendidos: "+arraya["estados"][i].turnos_atendidos+" -> Programa actualmente NO matriculando";
                          $("#listaProgramas").append(cadena1);
                        }

                        //Valores para cookies
                        tiemposT[(arraya['estados'][i].codigo)] = Math.round((arraya['estados'][i].segundos_espera)/60).toString();
                        mananaT[(arraya['estados'][i].codigo)] = arraya['estados'][i].turnos_manana;
                        tardeT[(arraya['estados'][i].codigo)] = arraya['estados'][i].turnos_tarde;
                        atendidosT[(arraya['estados'][i].codigo)] = arraya['estados'][i].turnos_atendidos;
                    }

                  }

                  //Alistar las cookies a cualquier cambio
                  for(var i = 1; i < ultimaCookie();i++){
                    if(getCookie("c"+i) != ""){
                      var encontrado = false;
                      var j=1;
                      var codigo=getCookie(("c"+i));
                      var carrera = codigo[0]+codigo[1]+codigo[2];
                      for(var k = 0; k < Object.keys(arraya['personas']).length; k++){
                          if(codigo != arraya['personas'][k].codigo && carrera == arraya['personas'][k].carrera){
                            j++;
                          }else if(codigo == arraya['personas'][k].codigo && carrera == arraya['personas'][k].carrera){
                            encontrado = true;
                            break;
                          }
                      }
                      if (encontrado == true) {
                        if(j==1){
                          $("#cc"+i).html("1 <span class='glyphicon glyphicon-chevron-left'></span> ES TU TURNO. ");
                          if(notificado[i] == false){
                            Push.create("información de turnos", {
                                body: "Es tu turno "+getCookie('c'+i),
                                icon: 'assets/images/ttt.ico',
                                timeout: 4000,
                                onClick: function () {
                                    window.location='#ubicacionTurnos';
                                    this.close();
                                }
                            });
                            notificado[i]=true;
                          }
                        }else{
                          if(mananaT[getCodigo(getCookie('c'+i))] != "Los que se pueda"){
                            var val1 = parseInt(mananaT[arraya['estados'][i].codigo]);
                            var val2 = parseInt(tiemposT[arraya['estados'][i].codigo]);
                            if(val2+j <= val1){
                              $("#cc"+i).text(j+" (aproximadamente "+(j*tiemposT[getCodigo(getCookie('c'+i))])+" minutos para su turno)(jornada mañana).");
                            }else{
                              $("#cc"+i).text(j+" (aproximadamente "+(j*tiemposT[getCodigo(getCookie('c'+i))])+" minutos para su turno)(jornada tarde).");
                            }
                          }else{
                            $("#cc"+i).text(j+" (aproximadamente "+(j*tiemposT[getCodigo(getCookie('c'+i))])+" minutos para su turno)(La jornada depende).");
                          }
                        }
                      } else {
                        cambioCookies('c'+i,"",-1);
                        actualizaTurnos();
                      }
                    }
                  }
              },
              error: function (obj, error, objError){
                  $("#listaProgramas").html("<p>Problema al contactar con el servidor, espere un momento y actualice la página o verifique su conexión a internet</p>");
              }
            });
        }

        function vaciarFormulario(){
          $("#phone").val("");
          $("#name").val("");
          $("#pass").val("");
        }

        function registrarTurno(codigo, nombre, pass){
          $.ajax({
              data: $("#contactForm").serialize(),
              type: "POST",
              url: "assets/php/formulario.php",
              async: true,
              success: function(datos){
                  $("#miMensaje").html("<p>"+datos.substr((datos.indexOf("Mensaje:")+8))+"</p>");
                  setTimeout("$('#mensaje').click();",500);

                  if (datos.search("satisfactoriamente") != -1) {
                    cambioCookies(("c"+ultimaCookie()),codigo,1);
                    actualizaTurnos();
                    vaciarFormulario();
                  }
              },
              error: function (obj, error, objError){
                $("#listaProgramas").html("<p>Problema al contactar con el servidor, espere un momento y actualice la página o verifique su conexión a internet</p>");
                $('#miMensaje').html("<p>Problema al contactar con el servidor, espere un momento y actualice la página o verifique su conexión a internet</p>");
                $('#mensaje').click();
              }
            });
        }

        function eliminaTurno(codigo){
          var parametros = {
                  "codigo" : getCookie("c"+codigo),
                  "pass" : $(("#miContraseña"+codigo)).val(),
                  "estado" : "eliminar"
          };
          $.ajax({
              data: parametros,
              type: "POST",
              url: "assets/php/eliminacion.php",
              async: true,
              success: function(datos){
                  $("#cerrando"+codigo).click();
                  if (datos.search("satisfactoriamente") != -1) {
                    for(var i=(codigo); i<ultimaCookie(); i++){
                      if(getCookie("c"+(i+1))!=""){
                        cambioCookies(("c"+i), getCookie("c"+(i+1)), 1);
                      }else{
                        cambioCookies(("c"+i), "", -1);
                      }
                    }
                    $(("#botonc"+codigo)).click();
                    actualizaTurnos();
                  }
                  $("#miMensaje").html("<p>"+datos.substr((datos.indexOf("Mensaje:")+8))+"</p>");
                  setTimeout("$('#mensaje').click();",500);
              },
              error: function (obj, error, objError){
                $("#listaProgramas").html("<p>Problema al contactar con el servidor, espere un momento y actualice la página o verifique su conexión a internet</p>");
                $('#miMensaje').html("<p>Problema al contactar con el servidor, espere un momento y actualice la página o verifique su conexión a internet</p>");
                $('#mensaje').click();
              }
            });
            $(("#miContraseña"+codigo)).val("");
        }

        function anadeTurno(codigo,pass){
          for (var i = 1; i < ultimaCookie(); i++) {
            if (getCookie("c"+i)==codigo) {
              $("#cerrando").click();
              $('#miMensaje').html("<p>Turno añadido anteriormente.</p>");
              setTimeout("$('#mensaje').click();",500);
              return 0;
            }
          }
          var values={
                    "codigo" : codigo,
                    "pass" : pass
                     };
          $.ajax({
            data: values,
            type: "POST",
            url: "assets/php/anadeTurno.php",
            async:true,
            success:function(datos){
              $("#cerrando").click();
              if(datos.search("satisfactoriamente") != -1){
                cambioCookies(("c"+ultimaCookie()),codigo,1);
                actualizaTurnos();
              }
              $('#miMensaje').html("<p>"+datos.substr((datos.indexOf("Mensaje:")+8))+"</p>");
              setTimeout("$('#mensaje').click();",500);
            },
            error:function(obj, error, objError){
              $("#listaProgramas").html("<p>Problema al contactar con el servidor, espere un momento y actualice la página o verifique su conexión a internet</p>");
              $('#miMensaje').html("<p>Problema al contactar con el servidor, espere un momento y actualice la página o verifique su conexión a internet</p>");
              $('#mensaje').click();
            }
          });
          $("#codigoAgrega").val("");
          $("#passAgrega").val("");
        }

        function quitarTurno(codigo){
         var values ={
               "codigo" : getCookie("c"+codigo),
               "pass" : $(("#miContraseñaElimina"+codigo)).val(),
               "estado" : "verificar"
             };
         $.ajax({
            data: values,
            type: "POST",
            url: "assets/php/eliminacion.php",
            async: true,
            success:function(datos){
                $("#cerrandoElimina"+codigo).click();
                if(datos.search("satisfactoriamente") != -1){
                  for(var i=(codigo); i<ultimaCookie(); i++){
                    if(getCookie("c"+(i+1))!=""){
                      cambioCookies(("c"+i), getCookie("c"+(i+1)), 1);
                    }else{
                      cambioCookies(("c"+i), "", -1);
                    }
                  }
                  $(("#botonc"+codigo)).click();
                  actualizaTurnos();
                }
                $('#miMensaje').html("<p>"+datos.substr((datos.indexOf("Mensaje:")+8))+"</p>");
                setTimeout("$('#mensaje').click();",500);
            },
            error:function(obj, error, objError){
              $("#listaProgramas").html("<p>Problema al contactar con el servidor, espere un momento y actualice la página o verifique su conexión a internet</p>");
              $('#miMensaje').html("<p>Problema al contactar con el servidor, espere un momento y actualice la página o verifique su conexión a internet</p>");
              $('#mensaje').click();
            }
          });
          $(("#miContraseñaElimina"+codigo)).val("");
        }

        function clickea(numero){
          $(("#mensaje"+numero)).click();
        }

        function iniciadorNotificaciones(numero){
          notificado[numero] = false;
        }

        function actualizaTurnos(){
          $("#ubicacionTurnos").html("<h3>TURNOS EN ESTA PÁGINA</h3> <a id='accesador'  data-toggle='modal' data-target='#myModalAgrega'>->Click para añadir turno ya pedido.<-</a><br />");
          var existenCookies = false;
          for(var i=1; i< ultimaCookie();i++){
            if (getCookie('c'+i) != "") {
              if ($("#myModal"+i).length > 0) {
                $("#myModal"+i).html("<div class='modal-dialog'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-dismiss='modal'>&times;</button><h4 class='modal-title'>información del turno</h4></div><div class='modal-body'><p>Eliminar turno del estudiante: "+getCookie('c'+i)+"</p><div class='form-group'><input class='form-control' id='miContraseña"+i+"' type='password' placeholder='Escriba su contraseña de eliminación' value='' required></div><button class='btn btn-default btn-sm' id='botonEliminacion"+i+"' style='margin-left:30%; border-radius: 15px;' onclick='eliminaTurno("+i+")'>Eliminar turno</button><div class='modal-footer'><button id='cerrando"+i+"' onclick='window.close();' type='button' class='btn btn-default btn-xs' data-dismiss='modal'>Close</button></div></div></div>");
              }else{
                $("#myModal").after("<div class='modal fade' id='myModal"+i+"' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-dismiss='modal'>&times;</button><h4 class='modal-title'>información del turno</h4></div><div class='modal-body'><p>Eliminar turno del estudiante: "+getCookie('c'+i)+"</p><div class='form-group'><input class='form-control' id='miContraseña"+i+"' type='password' placeholder='Escriba su contraseña de eliminación' value='' required></div><button class='btn btn-default btn-sm' id='botonEliminacion"+i+"' style='margin-left:30%; border-radius: 15px;' onclick='eliminaTurno("+i+")'>Eliminar turno</button><div class='modal-footer'><button id='cerrando"+i+"' onclick='window.close();' type='button' class='btn btn-default btn-xs' data-dismiss='modal'>Close</button></div></div></div></div>");
              }
              if ($("#myModalElimina"+i).length > 0) {
                $("#myModalElimina"+i).html("<div class='modal-dialog'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-dismiss='modal'>&times;</button><h4 class='modal-title'>información del turno</h4></div><div class='modal-body'><p>Eliminar de esta pagina el turno: "+getCookie('c'+i)+"</p><div class='form-group'><input class='form-control' id='miContraseñaElimina"+i+"' type='password' placeholder='Escriba su contraseña de eliminación' value='' required></div><button class='btn btn-default btn-sm' id='botonEliminacionElimina"+i+"' style='margin-left:30%; border-radius: 15px;' onclick='quitarTurno("+i+")'>Eliminar turno</button><div class='modal-footer'><button id='cerrandoElimina"+i+"' onclick='window.close();' type='button' class='btn btn-default btn-xs' data-dismiss='modal'>Close</button></div></div></div>");
              }else{
                $("#myModal").after("<div class='modal fade' id='myModalElimina"+i+"' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-dismiss='modal'>&times;</button><h4 class='modal-title'>información del turno</h4></div><div class='modal-body'><p>Eliminar de esta pagina el turno: "+getCookie('c'+i)+"</p><div class='form-group'><input class='form-control' id='miContraseñaElimina"+i+"' type='password' placeholder='Escriba su contraseña de eliminación' value='' required></div><button class='btn btn-default btn-sm' id='botonEliminacionElimina"+i+"' style='margin-left:30%; border-radius: 15px;' onclick='quitarTurno("+i+")'>Eliminar turno</button><div class='modal-footer'><button id='cerrandoElimina"+i+"' onclick='window.close();' type='button' class='btn btn-default btn-xs' data-dismiss='modal'>Close</button></div></div></div></div>");
              }

              $("#ubicacionTurnos").append("<div class='alert alert-success alert-dismissable'><button id='botonc"+i+"' type='button' class='close' data-dismiss='alert'>&times;</button>"+(getCookie("c"+i))+" actualmente eres el turno: <span class='highlight' id='cc"+i+"'></span><br /><a id='ccc"+i+"' data-toggle='modal' data-target='#myModal"+i+"'>cancelar turno</a><span class='highlight'> ||| </span><a id='cccc"+i+"' data-toggle='modal' data-target='#myModalElimina"+i+"'>eliminar de esta pagina</a></div>");

              iniciadorNotificaciones(i);
              existenCookies = true;
            }
          }
          if (!existenCookies) {
            $("#ubicacionTurnos").append("<p>Actualmente no hay turnos en esta pagina.</p>");
          }
        }

        $(document).ready(function(){
          inicioNumeroCookies();
          actualizaTurnos();
          setInterval(refrescamiento,1000);
          var vecPal=new Array();
          vecPal.push("INGENIERIA DE ALIMENTOS");
          vecPal.push("QUIMICA");
          vecPal.push("MATEMATICAS");
          vecPal.push("INGENIERIA CIVIL");
          vecPal.push("INGENIERIA DE SISTEMAS");
          vecPal.push("INGENIERIA QUIMICA");
          vecPal.push("ADMINISTRACION DE EMPRESAS NOCTURNA");
          vecPal.push("COMUNICACION SOCIAL");
          vecPal.push("DERECHO");
          vecPal.push("TRABAJO SOCIAL");
          vecPal.push("ECONOMIA");
          vecPal.push("ADMINISTRACION DE EMPRESAS DIURNA");
          vecPal.push("CONTADURIA PUBLICA NOCTURNA");
          vecPal.push("FILOSOFIA");
          vecPal.push("LINGUISTICA Y LITERATURA");
          vecPal.push("HISTORIA");
          vecPal.push("ADMINISTRACION INDUSTRIAL");
          vecPal.push("CONTADURIA PUBLICA DIURNA");
          vecPal.push("MEDICINA");
          vecPal.push("ODONTOLOGIA");
          vecPal.push("QUIMICA FARMACEUTICA");
          vecPal.push("ENFERMERIA");
          vecPal.push("BIOLOGIA");
          vecPal.push("TECNICA PROFESIONAL EN OPERACION DE PROCESOS PETROQUIMICOS");
          vecPal.push("LICENCIATURA EN EDUCACION CON ENFASIS EN CIENCIAS SOCIALES Y AMBIENTALES");
          vecPal.push("TECNICA PROFESIONAL EN PROCESOS METROLOGICOS");
          vecPal.push("PROFESIONAL UNIVERSITARIO EN LENGUAS EXTRANJERAS");
          $("#filtrador").autocomplete({source:vecPal});

          $("#turnador").click(function(e){
            var codigo = $("#phone").val();
            var nombre = $("#name").val();
            var pass = $("#pass").val();

            if(codigo != undefined && nombre != undefined && pass != undefined && codigo != "" && nombre != "" && pass != ""){
              if (codigo.length == 10){
                  registrarTurno(codigo,nombre,pass);

              }else{
                $("#miMensaje").html("<p>El código estudiantil suministrado no es válido</p>");
                setTimeout("$('#mensaje').click();",500);
              }
            }else{
              $("#miMensaje").html("<p>Los campos no pueden estar vacíos</p>");
              setTimeout("$('#mensaje').click();",500);
            }
          });
          $("#agregador").click(function(e){
            var codigo = $("#codigoAgrega").val();
            var pass = $("#passAgrega").val();

            if (codigo != undefined  && pass != undefined && codigo != "" && pass != "") {
              anadeTurno(codigo,pass);
            }else{
              $("#miMensaje").html("<p>Los campos no pueden estar vacíos</p>");
              setTimeout("$('#mensaje').click();",500);
            }
          });
          var isCtrl = false;
          var isAlt = false;
          document.onkeyup=function(e){
          if(e.which == 17) isCtrl=false;
          if(e.altKey) ifAlt=false;
          }
          document.onkeydown=function(e){
              if(e.which == 17) isCtrl=true;
                  if(e.which == 83 && isCtrl == true && e.altKey){
                      window.location="login.php";
                  }
          }
        });

    </script>
</body>

</html>
